#!/bin/sh
# Use dmenu to open and edit a file from a given list.
# Copyright 2010-2012 Tom Vincent <http://tlvince.com/contact>

# Global variables:
FILES="$HOME/.config/dmenu/edit-list"
BASE="$(dirname "$(readlink -f "$0")")"
CONFIG="${XDG_CONFIG_HOME:-$HOME/.config}/dmenu/dmenu.conf"

# Imports:
. "$BASE/lib/isSet.sh"
. "$BASE/lib/isTerminal.sh"
[ -f "$CONFIG" ] && source "$CONFIG"

isTerminal

choice="$(tty -s && dmenu $DMENU_OPTS < "$FILES")"
if [[ $choice ]]; then
    isSet "EDITOR" "Editor: "
    $EDITOR $(eval "echo $choice")  # Expand tilde XXX: can it be done w/o eval?
fi
